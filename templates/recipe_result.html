{%- extends "base.html" %}

{% block titleex -%} 查詢結果 ({{ result.pokemon.name_zh }}) {%- endblock %}

{% block content %}
<div class="container">
    <div class="row">
        <div class="col-sm-2 set-center">
            <img class="icon-fluid" src="/static/Icon/{{ result.pokemon.id }}.png" />
        </div>
        <div class="col-sm-10 set-center">
            <div class="short-div"><a href="{{ url_for('.pokemon_profile_result', id=result.pokemon.id) }}">#{{ result.pokemon.id }} <span class="pokemon-title">{{ result.pokemon.name_zh }}</span></a></div>
            <div class="short-div">英: {{ result.pokemon.name_en }} 日: {{ result.pokemon.name_jp }}<br />屬性: {{ result.pokemon.elements|join("、") }}</div>
        </div>
    </div>
    <div class="table-responsive">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>食譜</th>
                    <th>品質</th>
                    <th>機率</th>
                    <th>樣本</th>
                </tr>
            </thead>
            {% for entry in result.data %}
            <tr>
                <td><a href="{{ url_for('.find_pokemon_result', id=entry.recipe.id) }}"><img class="icon" src="/static/Recipe/{{ entry.recipe.id }}.png" />&nbsp;{{ entry.recipe.title_zh }}</a></td>
                <td>{{ entry.recipe_quality|string() }}</td>
                <td>{{ "{:.2%}".format(entry.probability) }}</td>
                <td>{{ entry.get_sample_size_string() }}</td>
            </tr>
            <tr>
                <td>配方</td>
                <td colspan="3">
                    {% for comp in entry.recipe_dish.items %}
                    {% for item in comp %}
                    <img class="icon" src="/static/Item/{{ item }}.png" />
                    {% endfor %}
                    &nbsp;&nbsp;&nbsp;
                    {% endfor %}
                </td>
            </tr>
            {% endfor %}
        </table>
    </div>
    <div class="well well-sm foot-info">資料處理花費 {{ "{:.3f}".format(result.time_consumed) }}秒</div>
</div>
{%- endblock %}
