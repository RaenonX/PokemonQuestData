{%- extends "base.html" %}

{% import "bootstrap/utils.html" as utils %}

{% block content %}
<div class="container">
    {%- with messages = get_flashed_messages(with_categories=True) %}
    {%- if messages %}
    <div class="row">
        {{ utils.flashed_messages(messages) }}
    </div>
    {%- endif %}
    <div class="row">
        <div class="col-md-12">
            <div class="glyphicon glyphicon-remove-circle alert alert-danger show" role="alert">
                目前網頁尚未完全建置完畢，發生錯誤還請見諒。
            </div>
        </div>
    </div>
    {%- endwith %}
    <div class="col-md-12 jumbotron">
        <h1>歡迎來到Pokemon Quest資訊站！</h1>
    </div>
    <div class="row">
        <div class="col-md-6">
            <a class="btn btn-primary btn-big" href="{{ url_for('.find_recipe_index') }}">從精靈查食譜</a>
        </div>
        <div class="col-md-6">
            <a class="btn btn-info btn-big" href="{{ url_for('.find_pokemon_index') }}">從食譜查精靈</a>
        </div>
    </div>
    <div class="row">
        <div class="col-md-6">
            <div class="well">
                <p class="set-center">更新日誌</p>
                <ul class="list-group">
                    {% for entry in site_log %}
                    <li class="list-group-item list-group-item-{{ entry.type }}">
                        {{ entry.timestamp.strftime('%m-%d %H:%M') }} (UTC): {{ entry.content }}
                    </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
        <div class="col-md-6 set-center">
            <div class="well">
                <p class="set-center">最新開鍋</p>
                <div class="list-group">
                    {% for entry in recent %}
                    <a href="{{ url_for('.find_recipe', id=entry.pokemon_id) }}" class="list-group-item">
                        {{ entry.timestamp.strftime('%m-%d %H:%M') }} (UTC)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <img class="icon" src="/static/Icon/{{ entry.pokemon_id }}.png" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <img class="icon" src="/static/Recipe/{{ entry.recipe_id }}.png" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        {{ entry.quality|string() }}
                    </a>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</div>
{%- endblock %}
